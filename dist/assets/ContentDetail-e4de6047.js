import{d as F,b as S,a as b,u as R,r as m,j as e,R as k,c as w}from"./index-e03c4bb4.js";import{R as A}from"./index-c3d78514.js";import{C as E}from"./ContentTypeSelect-306bef0e.js";function M(){var y;const g=F(),C=S(),l=g.contentId,{data:a}=b.useGetContentDetailQuery(Number(l)),{param:{setcontentTypeId:v,setcontentId:u},contentTypeList:h,contentDetail:d}=R(),[N,P]=b.usePutContentMutation(),p=a==null?void 0:a.contentTypeId;a==null||a.contentTypeName;const x=(y=h.findContentType(a==null?void 0:a.contentTypeId))==null?void 0:y.contentBodySchema,[n,o]=m.useState(d.formDefault),T=t=>{const{contentTypeId:c,contentTypeName:s}=t;o(r=>({...r,contentTypeId:c,contentTypeName:s}))},i=t=>{const c=t.target.name,s=t.target.value;o(r=>({...r,[c]:s}))},j=(t,c)=>{o(s=>({...s,body:{...s.body,[t]:c}}))},f=async()=>{try{const{contentId:t}=n;if(!t)return;const c=await N({...n,contentId:t}).unwrap().then(s=>{alert(`성공 : ${s.message}`),C(w.content.absPath)}).catch(s=>{var r;alert(`${JSON.stringify((r=s.data)==null?void 0:r.message)}`)})}catch{alert("rejected")}};return m.useEffect(()=>{l&&u(Number(l))},[l,u]),m.useEffect(()=>{d.data&&o(d.data)},[d.data]),e.jsxs("div",{children:[e.jsx("section",{className:"breadcrumb",children:e.jsxs("h1",{children:["Content Detail : ",n.contentId]})}),e.jsxs("div",{className:"",children:[e.jsx("div",{className:"relative p-4 mb-5",children:e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("fieldset",{children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"contentTypeSelect",children:"콘텐츠 타입 선택"}),e.jsx(E,{disabled:!0,contentTypeId:p,setcontentTypeId:v,contentTypeList:h.data?h.data:[],onChange:T})]})}),e.jsx("hr",{}),e.jsxs("fieldset",{children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",children:"Title"}),e.jsx("input",{id:"title",name:"title",type:"text",onChange:i,value:n.title})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"creator",children:"Creator"}),e.jsx("input",{id:"creator",name:"creator",type:"text",onChange:i,value:n.creator})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",children:"Description"}),e.jsx("input",{id:"description",name:"description",type:"text",onChange:i,value:n.description})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("label",{className:"block mb-2",htmlFor:"status",children:"Status"}),e.jsxs("label",{children:[e.jsx("input",{onChange:i,checked:n.status==="draft",type:"radio",name:"status",value:"draft",className:`p-4 ${n.status==="draft"?"bg-primary":"bg-secondary"}`}),"draft"]}),e.jsxs("label",{children:[e.jsx("input",{onChange:i,checked:n.status==="publish",type:"radio",name:"status",value:"publish",className:`p-4 ${n.status==="publish"?"bg-primary":"bg-secondary"}`}),"publish"]})]}),e.jsx("div",{children:e.jsxs("label",{htmlFor:"title",children:["createdAt : ",n.createdAt]})}),e.jsx("div",{children:e.jsxs("label",{htmlFor:"title",children:["updatedAt : ",n.updatedAt]})})]}),e.jsx("hr",{}),x?e.jsx("div",{children:x.map(t=>e.jsxs(k.Fragment,{children:[e.jsx("label",{htmlFor:"title",children:t.schemaName}),t.schemaType==="string"?e.jsx("input",{id:t.schemaName,name:t.schemaName,type:"text",value:n.body[t.schemaName],onChange:c=>{j(t.schemaName,c.currentTarget.value)}}):null,t.schemaType==="text"?e.jsx(A,{theme:"snow",className:"bg-white react-quill-editor",value:n.body[t.schemaName],onChange:(c,s,r,I)=>{j(t.schemaName,I.getHTML())}}):null,e.jsx("hr",{})]},t.schemaName))}):null]})})}),e.jsx("div",{className:"my-1 text-right",children:e.jsx("button",{disabled:!p,onClick:f,name:"submit",children:"Submit"})})]})]})}export{M as default};
