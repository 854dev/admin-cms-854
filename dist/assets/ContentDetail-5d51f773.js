import{e as N,c as S,b as C,a as E,r as h,j as t,d as B}from"./index-592c32d0.js";import{C as D}from"./ContentTypeSelect-f60dda88.js";import{C as F,a as P}from"./ContentBodyEdit-d913cf30.js";function $(){var y;const x=N(),j=S(),c=x.contentId,{data:a}=C.useGetContentDetailQuery(Number(c)),{param:{setcontentTypeId:b,setcontentId:u},contentTypeList:l,contentDetail:d}=E(),[f,w]=C.usePutContentMutation(),m=a==null?void 0:a.contentTypeId,p=(y=l.findContentType(a==null?void 0:a.contentTypeId))==null?void 0:y.contentBodySchema,[o,i]=h.useState(d.formDefault),T=e=>{const{contentTypeId:s,contentTypeName:n}=e;i(r=>({...r,contentTypeId:s,contentTypeName:n}))},g=(e,s)=>{i(n=>({...n,[e]:s}))},I=(e,s)=>{i(n=>({...n,body:{...n.body,[e]:s}}))},v=async()=>{try{const{contentId:e}=o;if(!e)return;const s=await f({...o,contentId:e}).unwrap().then(n=>{alert(`성공 : ${n.message}`),j(B.content.absPath)}).catch(n=>{var r;alert(`${JSON.stringify((r=n.data)==null?void 0:r.message)}`)})}catch{alert("rejected")}};return h.useEffect(()=>{c&&u(Number(c))},[c,u]),h.useEffect(()=>{d.data&&i(d.data)},[d.data]),t.jsxs("div",{children:[t.jsx("section",{className:"breadcrumb",children:t.jsxs("h1",{children:["Content Detail : ",o.contentId]})}),t.jsxs("div",{className:"",children:[t.jsx("div",{className:"relative p-4 mb-5",children:t.jsx("div",{children:t.jsxs("div",{children:[t.jsx("fieldset",{children:t.jsxs("div",{children:[t.jsx("label",{htmlFor:"contentTypeSelect",children:"콘텐츠 타입 선택"}),t.jsx(D,{disabled:!0,contentTypeId:m,setcontentTypeId:b,contentTypeList:l.data?l.data:[],onChange:T})]})}),t.jsx("hr",{}),t.jsx(F,{disabled:!m,contentDetailForm:o,onContentDetailChange:(e,s)=>{g(e,s)}}),t.jsx("hr",{}),p?t.jsx(P,{contentDetail:o,contentBodySchema:p,handleBodyChange:I}):null]})})}),t.jsx("div",{className:"my-1 text-right",children:t.jsx("button",{disabled:!m,onClick:v,name:"submit",children:"Submit"})})]})]})}export{$ as default};
