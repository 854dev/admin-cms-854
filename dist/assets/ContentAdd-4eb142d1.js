import{b as C,u as v,a as T,r as N,j as e,R as f,c as F}from"./index-e03c4bb4.js";import{R as S}from"./index-c3d78514.js";import{C as A}from"./ContentTypeSelect-306bef0e.js";function w(){const m=C(),{param:{contentTypeId:i,setcontentTypeId:p},contentTypeList:l,contentDetail:u}=v(),[x,D]=T.usePostContentMutation(),o=l.findContentType(i),j=o?o.contentBodySchema:[],[a,d]=N.useState(u.formDefault),y=t=>{const{contentTypeId:s,contentTypeName:n}=t;d(r=>({...r,contentTypeId:s,contentTypeName:n}))},c=t=>{const s=t.target.name,n=t.target.value;d(r=>({...r,[s]:n}))},h=(t,s)=>{d(n=>({...n,body:{...n.body,[t]:s}}))},b=async()=>{try{const t=await x(a).unwrap().then(s=>{alert(`성공 : ${s.message}`),m(F.content.absPath)}).catch(s=>{var n;alert(`${JSON.stringify((n=s.data)==null?void 0:n.message)}`)})}catch{alert("rejected")}};return e.jsxs("div",{children:[e.jsx("section",{className:"breadcrumb",children:e.jsx("h1",{children:"Content Add"})}),e.jsxs("div",{className:"",children:[e.jsx("div",{className:"relative p-4 mb-5",children:e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("fieldset",{children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"contentTypeSelect",children:"콘텐츠 타입 선택"}),e.jsx(A,{contentTypeId:i,setcontentTypeId:p,contentTypeList:l.data?l.data:[],onChange:y})]})}),e.jsx("hr",{}),e.jsxs("fieldset",{disabled:!i,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",children:"Title"}),e.jsx("input",{id:"title",name:"title",type:"text",onChange:c})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"creator",children:"Creator"}),e.jsx("input",{id:"creator",name:"creator",type:"text",onChange:c})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",children:"Description"}),e.jsx("input",{id:"description",name:"description",type:"text",onChange:c})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("label",{className:"block mb-2",htmlFor:"status",children:"Status"}),e.jsxs("label",{children:[e.jsx("input",{onChange:c,checked:a.status==="draft",type:"radio",name:"status",value:"draft",className:`p-4 ${a.status==="draft"?"bg-primary":"bg-secondary"}`}),"draft"]}),e.jsxs("label",{children:[e.jsx("input",{onChange:c,checked:a.status==="publish",type:"radio",name:"status",value:"publish",className:`p-4 ${a.status==="publish"?"bg-primary":"bg-secondary"}`}),"publish"]})]}),e.jsx("div",{children:e.jsxs("label",{htmlFor:"title",children:["createdAt : ",a.createdAt]})}),e.jsx("div",{children:e.jsxs("label",{htmlFor:"title",children:["updatedAt : ",a.updatedAt]})})]}),e.jsx("hr",{}),e.jsx("div",{children:j.map(t=>e.jsxs(f.Fragment,{children:[e.jsx("label",{htmlFor:"title",children:t.schemaName}),t.schemaType==="string"?e.jsx("input",{id:t.schemaName,name:t.schemaName,type:"text",onChange:s=>{h(t.schemaName,s.currentTarget.value)}}):null,t.schemaType==="text"?e.jsx(S,{theme:"snow",className:"bg-white react-quill-editor",onChange:(s,n,r,g)=>{h(t.schemaName,g.getHTML())}}):null,e.jsx("hr",{})]},t.schemaName))})]})})}),e.jsx("div",{className:"my-1 text-right",children:e.jsx("button",{disabled:!i,onClick:b,name:"submit",children:"Submit"})})]})]})}export{w as default};
