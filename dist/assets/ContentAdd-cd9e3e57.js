import{d as I,r,a as l,j as t,R as S}from"./index-af880b26.js";import{R as F}from"./index-42f3fd30.js";const D={title:"",contentTypeId:-1,contentTypeName:"",creator:"",createdAt:"-",updatedAt:"-",deletedAt:"",status:"draft",body:{},tags:[]};function E(){const m=I(),[x,p]=r.useState(),{data:c,error:A,isSuccess:h,isFetching:j}=l.useGetContentTypeListQuery({page:1,limit:50}),[T,L]=l.useLazyGetContentTypeDetailQuery(),[g,R]=l.usePostContentMutation(),[s,d]=r.useState(D),[b,C]=r.useState([]),N=async(e,n)=>{p(e),y(e)},y=async e=>{const n=await T(Number(e)).unwrap();C(n.contentBodySchema)},o=e=>{const n=e.target.name,a=e.target.value;d(i=>({...i,[n]:a}))},u=(e,n)=>{d(a=>({...a,body:{...a.body,[e]:n}}))},v=async()=>{try{const e=await g(s).unwrap().then(n=>{alert(`성공 : ${n.message}`)}).catch(n=>{var a;alert(`${JSON.stringify((a=n.data)==null?void 0:a.message)}`)})}catch{alert("rejected")}};return r.useEffect(()=>{var e;if(h&&c.data.length>0){const n=(e=m.state)==null?void 0:e.contentTypeId,a=n?c.data.find(i=>i.contentTypeId===n):c.data[0];p(a.contentTypeId),d({...s,contentTypeId:a.contentTypeId,contentTypeName:a.contentTypeName}),y(a.contentTypeId)}},[h,j]),t.jsxs("div",{children:[t.jsx("section",{className:"breadcrumb",children:t.jsx("h1",{children:"Content Add"})}),t.jsxs("div",{className:"",children:[t.jsx("div",{className:"relative p-4 mb-5",children:t.jsx("div",{children:t.jsxs("div",{children:[t.jsxs("fieldset",{children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"contentTypeSelect",children:"콘텐츠 타입 선택"}),t.jsx("select",{name:"contentTypeSelect",onChange:e=>{const n=e.currentTarget.options[e.currentTarget.options.selectedIndex].dataset;N(Number(n.contentTypeId),n.contentTypeName)},children:c?t.jsx(t.Fragment,{children:c.data.map(e=>t.jsx("option",{selected:e.contentTypeId===x,value:e.contentTypeId,"data-content-type-id":e.contentTypeId,"data-content-type-name":e.contentTypeName,children:e.contentTypeName},e.contentTypeId))}):null})]}),t.jsx("hr",{}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"title",children:"Title"}),t.jsx("input",{id:"title",name:"title",type:"text",onChange:o})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"creator",children:"Creator"}),t.jsx("input",{id:"creator",name:"creator",type:"text",onChange:o})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"description",children:"Description"}),t.jsx("input",{id:"description",name:"description",type:"text",onChange:o})]}),t.jsxs("div",{className:"p-4",children:[t.jsx("label",{className:"block mb-2",htmlFor:"status",children:"Status"}),t.jsxs("label",{children:[t.jsx("input",{onChange:o,type:"radio",name:"status",value:"draft",className:`p-4 ${s.status==="draft"?"bg-primary":"bg-secondary"}`}),"draft"]}),t.jsxs("label",{children:[t.jsx("input",{onChange:o,type:"radio",name:"status",value:"publish",className:`p-4 ${s.status==="publish"?"bg-primary":"bg-secondary"}`}),"publish"]})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"title",children:["createdAt : ",s.createdAt]}),t.jsxs("label",{htmlFor:"title",children:["updatedAt : ",s.updatedAt]})]})]}),t.jsx("hr",{}),t.jsx("div",{children:b.map(e=>t.jsxs(S.Fragment,{children:[t.jsx("label",{htmlFor:"title",children:e.schemaName}),e.schemaType==="string"?t.jsx("input",{id:e.schemaName,name:e.schemaName,type:"text",onChange:n=>{u(e.schemaName,n.currentTarget.value)}}):null,e.schemaType==="text"?t.jsx(F,{theme:"snow",className:"bg-white react-quill-editor",onChange:(n,a,i,f)=>{u(e.schemaName,f.getHTML())}}):null,t.jsx("hr",{})]},e.schemaName))})]})})}),t.jsx("div",{className:"my-1 text-right",children:t.jsx("button",{onClick:v,name:"submit",children:"Submit"})})]})]})}export{E as default};
//# sourceMappingURL=ContentAdd-cd9e3e57.js.map
